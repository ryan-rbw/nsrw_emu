{
  "name": "Complex HIL Test",
  "description": "Multi-stage test: CRC errors, then power limit, then fault injection",
  "version": "1.0",
  "schedule": [
    {
      "t_ms": 1000,
      "duration_ms": 3000,
      "action": {
        "inject_crc_error": true
      }
    },
    {
      "t_ms": 5000,
      "duration_ms": 5000,
      "action": {
        "limit_power_w": 60.0,
        "limit_current_a": 4.0
      }
    },
    {
      "t_ms": 12000,
      "duration_ms": 0,
      "condition": {
        "mode_in": "SPEED",
        "rpm_gt": 2000
      },
      "action": {
        "set_fault_bits": 1,
        "delay_reply_ms": 100
      }
    },
    {
      "t_ms": 15000,
      "duration_ms": 0,
      "action": {
        "clear_fault_bits": 255
      }
    }
  ]
}
